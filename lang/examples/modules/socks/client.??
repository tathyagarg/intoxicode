@all
@import("socket")
@import("fs")
@import("http")

fd = socket ~ socket(socket ~ AF_INET, socket ~ SOCK_STREAM, 0)
socket ~ connect(fd, "127.0.0.1", 8000)

resp = http ~ post(
  fd,
  "/",
  [
    http ~ Header{
      name -> "Content-Type",
      value -> "text/plain"
    }
  ],
  "{\"message\": \"Hello, World!\"}"
)

scream(http ~ response_from_data(resp))
